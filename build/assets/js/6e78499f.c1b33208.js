"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6914],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>g});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=r.createContext({}),u=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(i.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(t),m=o,g=p["".concat(i,".").concat(m)]||p[m]||d[m]||a;return t?r.createElement(g,s(s({ref:n},c),{},{components:t})):r.createElement(g,s({ref:n},c))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=m;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l[p]="string"==typeof e?e:o,s[1]=l;for(var u=2;u<a;u++)s[u]=t[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},35098:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var r=t(87462),o=(t(67294),t(3905));const a={},s=void 0,l={unversionedId:"intro/npm/util",id:"intro/npm/util",title:"util",description:"1. classnames",source:"@site/docs/intro/npm/util.md",sourceDirName:"intro/npm",slug:"/intro/npm/util",permalink:"/docs/next/intro/npm/util",draft:!1,editUrl:"https://github.com/foolishandi/myblog/tree/main/docs/intro/npm/util.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"momentjs",permalink:"/docs/next/intro/npm/momentjs"},next:{title:"\u5143\u7d20\u4ea4\u4e92",permalink:"/docs/next/intro/npm/\u5143\u7d20\u4ea4\u4e92"}},i={},u=[{value:"1. classnames",id:"1-classnames",level:2},{value:"2.lodash",id:"2lodash",level:2},{value:"array",id:"array",level:3},{value:"collection",id:"collection",level:3},{value:"object",id:"object",level:3},{value:"string",id:"string",level:3},{value:"3.ahook",id:"3ahook",level:2},{value:"\u8bf7\u6c42",id:"\u8bf7\u6c42",level:3},{value:"DOM",id:"dom",level:3},{value:"\u5168\u5c4f",id:"\u5168\u5c4f",level:3},{value:"mutation",id:"mutation",level:3},{value:"\u76d1\u542c\u5143\u7d20\u53ef\u89c1\u533a\u57df\u6bd4\u4f8b",id:"\u76d1\u542c\u5143\u7d20\u53ef\u89c1\u533a\u57df\u6bd4\u4f8b",level:3},{value:"size\u6539\u53d8",id:"size\u6539\u53d8",level:3},{value:"useReactive",id:"usereactive",level:3}],c={toc:u};function p(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"1-classnames"},"1. classnames"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"npm i classnames\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"classNames('foo', 'bar'); // => 'foo bar'\nclassNames('foo', { bar: true }); // => 'foo bar'\nclassNames({ 'foo-bar': true }); // => 'foo-bar'\nclassNames({ 'foo-bar': false }); // => ''\nclassNames({ foo: true }, { bar: true }); // => 'foo bar'\nclassNames({ foo: true, bar: true }); // => 'foo bar'\n\n// lots of arguments of various types\nclassNames('foo', { bar: true, duck: false }, 'baz', { quux: true }); // => 'foo bar baz quux'\n\n// other falsy values are just ignored\nclassNames(null, false, 'bar', undefined, 0, 1, { baz: null }, ''); // => 'bar 1'\n\n// basic\nvar classNames = require('classnames');\n\nclass Button extends React.Component {\n  // ...\n  render () {\n    var btnClass = classNames({\n      btn: true,\n      'btn-pressed': this.state.isPressed,\n      'btn-over': !this.state.isPressed && this.state.isHovered\n    });\n    return <button className={btnClass}>{this.props.label}</button>;\n  }\n}\n\n//  css-modules\n/* components/submit-button.js */\nimport { Component } from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './submit-button.css';\n\nlet cx = classNames.bind(styles);\n\nexport default class SubmitButton extends Component {\n  render () {\n    let text = this.props.store.submissionInProgress ? 'Processing...' : 'Submit';\n    let className = cx({\n      base: true,\n      inProgress: this.props.store.submissionInProgress,\n      error: this.props.store.errorOccurred,\n      disabled: this.props.form.valid,\n    });\n    return <button className={className}>{text}</button>;\n  }\n};\n")),(0,o.kt)("h2",{id:"2lodash"},"2.",(0,o.kt)("a",{parentName:"h2",href:"https://lodash.com/"},"lodash")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Tested in Chrome 74-75, Firefox 66-67, IE 11, Edge 18, Safari 11-12, & Node.js 8-12.")),(0,o.kt)("h3",{id:"array"},"array"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='array'",title:"'array'"},"// array\n_.chunk(['a', 'b', 'c', 'd'], 2);\n// => [['a', 'b'], ['c', 'd']]\n \n_.chunk(['a', 'b', 'c', 'd'], 3);\n// => [['a', 'b', 'c'], ['d']]\n\n// Creates an array of elements split into groups the length of size. If array can't be split evenly, the final chunk will be the remaining elements.\n_.compact([0, 1, false, 2, '', 3]);\n// => [1, 2, 3]\n\n_.difference([2, 1], [2, 3]);\n// => [1]\n_.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n// => [{ 'x': 2 }]\n\n_.drop([1, 2, 3], 2);\n// => [3]\nvar users = [\n  { 'user': 'barney',  'active': false },\n  { 'user': 'fred',    'active': false },\n  { 'user': 'pebbles', 'active': true }\n];\n_.dropWhile(users, function(o) { return !o.active; });\n// => objects for ['pebbles']\n\n// Search from the `fromIndex`.\n_.indexOf([1, 2, 1, 2], 2, 2);\n// => 3\n\n_.intersection([2, 1], [2, 3]);\n// => [2]\n// The `_.property` iteratee shorthand.\n_.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n// => [{ 'x': 1 }]\n\nvar array = ['a', 'b', 'c', 'a', 'b', 'c'];\n \n_.pull(array, 'a', 'c');\nconsole.log(array);\n// => ['b', 'b']\n\n// The `_.property` iteratee shorthand.\n_.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n// => [{ 'x': 1 }, { 'x': 2 }]\n\n")),(0,o.kt)("h3",{id:"collection"},"collection"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='Collection'",title:"'Collection'"},"// Collection\n_.countBy([6.1, 4.2, 6.3], Math.floor);\n// => { '4': 1, '6': 2 }\n// The `_.property` iteratee shorthand.\n_.countBy(['one', 'two', 'three'], 'length');\n// => { '3': 2, '5': 1 }\n\n_.groupBy([6.1, 4.2, 6.3], Math.floor);\n// => { '4': [4.2], '6': [6.1, 6.3] }\n// The `_.property` iteratee shorthand.\n_.groupBy(['one', 'two', 'three'], 'length');\n// => { '3': ['one', 'two'], '5': ['three'] }\n\nvar array = [\n  { 'dir': 'left', 'code': 97 },\n  { 'dir': 'right', 'code': 100 }\n];\n_.keyBy(array, 'dir');\n// => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n\n_.size([1, 2, 3]);\n// => 3\n_.size({ 'a': 1, 'b': 2 });\n// => 2\n_.size('pebbles');\n// => 7\n")),(0,o.kt)("h3",{id:"object"},"object"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='object'",title:"'object'"},"var object = { 'a': 1, 'b': 2, 'c': 1 };\n_.invertBy(object);\n// => { '1': ['a', 'c'], '2': ['b'] }\n_.invertBy(object, function(value) {\n  return 'group' + value;\n});\n// => { 'group1': ['a', 'c'], 'group2': ['b'] }\n")),(0,o.kt)("h3",{id:"string"},"string"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='string'",title:"'string'"},"_.capitalize('FRED');\n// => 'Fred'\n\n_.escape('fred, barney, & pebbles');\n// => 'fred, barney, &amp; pebbles'\n_.escapeRegExp('[lodash](https://lodash.com/)');\n// => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n")),(0,o.kt)("h2",{id:"3ahook"},"3.",(0,o.kt)("a",{parentName:"h2",href:"https://ahooks.js.org/zh-CN/"},"ahook")),(0,o.kt)("h3",{id:"\u8bf7\u6c42"},"\u8bf7\u6c42"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u8bf7\u6c42\nimport { message } from 'antd';\nimport React, { useState } from 'react';\nimport { useRequest } from 'ahooks';\n\nfunction editUsername(username: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (Math.random() > 0.5) {\n        resolve();\n      } else {\n        reject(new Error('Failed to modify username'));\n      }\n    }, 1000);\n  });\n}\n\nexport default () => {\n  const [state, setState] = useState('');\n\n  const { loading, run, cancel } = useRequest(editUsername, {\n    manual: true,\n    onSuccess: (result, params) => {\n      setState('');\n      message.success(`The username was changed to \"${params[0]}\" !`);\n    },\n    onError: (error) => {\n      message.error(error.message);\n    },\n  });\n\n  return (\n    <div>\n      <input\n        onChange={(e) => setState(e.target.value)}\n        value={state}\n        placeholder=\"Please enter username\"\n        style={{ width: 240, marginRight: 16 }}\n      />\n      <button disabled={loading} type=\"button\" onClick={() => run(state)}>\n        {loading ? 'Loading' : 'Edit'}\n      </button>\n      <button type=\"button\" onClick={cancel} style={{ marginLeft: 16 }}>\n        Cancel\n      </button>\n    </div>\n  );\n};\n\n// \u8f6e\u8be2\nimport { useRequest } from 'ahooks';\nimport React from 'react';\nimport Mock from 'mockjs';\nimport { message } from 'antd';\n\nfunction getUsername() {\n  console.log('polling getUsername Error');\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      reject(new Error(Mock.mock('@name')));\n    }, 1000);\n  });\n}\n\nexport default () => {\n  const { data, loading, run, cancel } = useRequest(getUsername, {\n    pollingInterval: 1000,\n    pollingWhenHidden: false,\n    pollingErrorRetryCount: 3,\n    manual: true,\n    onError: (error) => {\n      message.error(error.message);\n    },\n  });\n\n  return (\n    <>\n      <p>Username: {loading ? 'Loading' : data}</p>\n      <button type=\"button\" onClick={run}>\n        start\n      </button>\n      <button type=\"button\" onClick={cancel} style={{ marginLeft: 16 }}>\n        stop\n      </button>\n    </>\n  );\n};\n")),(0,o.kt)("h3",{id:"dom"},"DOM"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u7ec4\u4ef6\u5916\u70b9\u51fb\u4e8b\u4ef6\nimport React, { useState, useRef } from 'react';\nimport { useClickAway } from 'ahooks';\n\nexport default () => {\n  const [counter, setCounter] = useState(0);\n  const ref = useRef<HTMLButtonElement>(null);\n  useClickAway(() => {\n    setCounter((s) => s + 1);\n  }, \n  ref, //() => document.getElementById('use-click-away-button'),\n  //  ['click', 'contextmenu'], //\u76d1\u542c\u4e8b\u4ef6\n  );\n\n  return (\n    <div>\n      <button ref={ref} type=\"button\">\n        box\n      </button>\n      <p>counter: {counter}</p>\n    </div>\n  );\n};\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u62d6\u62fd\nimport React, { useRef, useState } from 'react';\nimport { useDrop, useDrag } from 'ahooks';\n\nconst DragItem = ({ data }) => {\n  const dragRef = useRef(null);\n\n  const [dragging, setDragging] = useState(false);\n\n  useDrag(data, dragRef, {\n    onDragStart: () => {\n      setDragging(true);\n    },\n    onDragEnd: () => {\n      setDragging(false);\n    },\n  });\n\n  return (\n    <div\n      ref={dragRef}\n      style={{\n        border: '1px solid #e8e8e8',\n        padding: 16,\n        width: 80,\n        textAlign: 'center',\n        marginRight: 16,\n      }}\n    >\n      {dragging ? 'dragging' : `box-${data}`}\n    </div>\n  );\n};\n\nexport default () => {\n  const [isHovering, setIsHovering] = useState(false);\n\n  const dropRef = useRef(null);\n\n  useDrop(dropRef, {\n    onText: (text, e) => {\n      console.log(e);\n      alert(`'text: ${text}' dropped`);\n    },\n    onFiles: (files, e) => {\n      console.log(e, files);\n      alert(`${files.length} file dropped`);\n    },\n    onUri: (uri, e) => {\n      console.log(e);\n      alert(`uri: ${uri} dropped`);\n    },\n    onDom: (content: string, e) => {\n      alert(`custom: ${content} dropped`);\n    },\n    onDragEnter: () => setIsHovering(true),\n    onDragLeave: () => setIsHovering(false),\n  });\n\n  return (\n    <div>\n      <div ref={dropRef} style={{ border: '1px dashed #e8e8e8', padding: 16, textAlign: 'center' }}>\n        {isHovering ? 'release here' : 'drop here'}\n      </div>\n\n      <div style={{ display: 'flex', marginTop: 8 }}>\n        {['1', '2', '3', '4', '5'].map((e, i) => (\n          <DragItem key={e} data={e} />\n        ))}\n      </div>\n    </div>\n  );\n};\n")),(0,o.kt)("h3",{id:"\u5168\u5c4f"},"\u5168\u5c4f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import React, { useRef } from 'react';\nimport { useFullscreen } from 'ahooks';\n\nexport default () => {\n  const ref = useRef(null);\n  const [isFullscreen, { enterFullscreen, exitFullscreen, toggleFullscreen }] = useFullscreen(ref);\n  return (\n    <div ref={ref} style={{ background: 'white' }}>\n      <div style={{ marginBottom: 16 }}>{isFullscreen ? 'Fullscreen' : 'Not fullscreen'}</div>\n      <div>\n        <button type=\"button\" onClick={enterFullscreen}>\n          enterFullscreen\n        </button>\n        <button type=\"button\" onClick={exitFullscreen} style={{ margin: '0 8px' }}>\n          exitFullscreen\n        </button>\n        <button type=\"button\" onClick={toggleFullscreen}>\n          toggleFullscreen\n        </button>\n      </div>\n    </div>\n  );\n};\n")),(0,o.kt)("h3",{id:"mutation"},"mutation"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { useMutationObserver } from 'ahooks';\nimport React, { useRef, useState } from 'react';\n\nconst App: React.FC = () => {\n  const [width, setWidth] = useState(200);\n  const [count, setCount] = useState(0);\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  useMutationObserver(\n    (mutationsList) => {\n      mutationsList.forEach(() => setCount((c) => c + 1));\n    },\n    ref,\n    { attributes: true },\n  );\n\n  return (\n    <div>\n      <div ref={ref} style={{ width, padding: 12, border: '1px solid #000', marginBottom: 8 }}>\n        current width\uff1a{width}\n      </div>\n      <button onClick={() => setWidth((w) => w + 10)}>widening</button>\n      <p>Mutation count {count}</p>\n    </div>\n  );\n};\n\nexport default App;\n")),(0,o.kt)("h3",{id:"\u76d1\u542c\u5143\u7d20\u53ef\u89c1\u533a\u57df\u6bd4\u4f8b"},"\u76d1\u542c\u5143\u7d20\u53ef\u89c1\u533a\u57df\u6bd4\u4f8b"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import React from 'react';\nimport { useInViewport } from 'ahooks';\n\nexport default () => {\n  const [inViewport, ratio] = useInViewport(() => document.getElementById('children'), {\n    threshold: [0, 0.25, 0.5, 0.75, 1],\n    root: () => document.getElementById('parent'),\n  });\n  return (\n    <div>\n      <div style={{ width: 300, height: 300, overflow: 'scroll', border: '1px solid' }} id=\"parent\">\n        scroll here\n        <div style={{ height: 800 }}>\n          <div\n            id=\"children\"\n            style={{\n              border: '1px solid',\n              height: 100,\n              width: 100,\n              textAlign: 'center',\n              marginTop: 80,\n            }}\n          >\n            observer dom\n          </div>\n        </div>\n      </div>\n      <div style={{ marginTop: 16, color: inViewport ? '#87d068' : '#f50' }}>\n        <p>inViewport: {inViewport ? 'visible' : 'hidden'}</p>\n        <p>ratio: {ratio}</p>\n      </div>\n    </div>\n  );\n};\n")),(0,o.kt)("h3",{id:"size\u6539\u53d8"},"size\u6539\u53d8"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import React from 'react';\nimport { useSize } from 'ahooks';\n\nexport default () => {\n  const size = useSize(document.querySelector('body'));\n  return (\n    <div>\n      <p>Try to resize the preview window </p>\n      <p>\n        width: {size?.width}px, height: {size?.height}px\n      </p>\n    </div>\n  );\n};\n")),(0,o.kt)("h3",{id:"usereactive"},"useReactive"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import React from 'react';\nimport { useReactive } from 'ahooks';\n\nexport default () => {\n  const state = useReactive({\n    count: 0,\n    inputVal: '',\n    obj: {\n      value: '',\n    },\n  });\n\n  return (\n    <div>\n      <p> state.count\uff1a{state.count}</p>\n\n      <button style={{ marginRight: 8 }} onClick={() => state.count++}>\n        state.count++\n      </button>\n      <button onClick={() => state.count--}>state.count--</button>\n\n      <p style={{ marginTop: 20 }}> state.inputVal: {state.inputVal}</p>\n      <input onChange={(e) => (state.inputVal = e.target.value)} />\n\n      <p style={{ marginTop: 20 }}> state.obj.value: {state.obj.value}</p>\n      <input onChange={(e) => (state.obj.value = e.target.value)} />\n    </div>\n  );\n};\n")))}p.isMDXComponent=!0}}]);
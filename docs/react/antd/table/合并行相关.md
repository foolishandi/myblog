## 合并行函数

```js
/* 
data:处理的数据
name:合并标记的字段
link:与name关联的下一级标注，生成字段名:name+link
*/
const setRowSpan = (source, name, link) => {
  let data=JSON.parse(JSON.stringify(source));
  const rowSpan = `${name}RowSpan`;
  let titleRow = data[0]; // 合并行
  titleRow[rowSpan] = 1;
  data.forEach((row, index) => {
    if (link) row[name + link] = row[name] + "-" + row[link];
    const nextRow = data[index + 1];
    if (!nextRow) return;
    if (row[name] === nextRow[name]) {
      titleRow[rowSpan] += 1;
      nextRow[rowSpan] = 0;
    } else {
      titleRow = nextRow; // 修改指向
      titleRow[rowSpan] = 1;
    }
  });
//   console.log(data)
  return data;
};
```

## column 使用

```js
// 简单使用
const data=[{},···]

setRowSpan(data,'title') //改变原数据对象

const columns = [
  {
    title: "风险类别",
    dataIndex: "title",
    render: (text, row) => {
      return {
        children: text,
        props: {
          rowSpan: row.titleRowSpan, // 使用
        },
      };
    },
  },
];
```
